<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc0">enum  NetWorkState
{
    NETWORK_OPEN,
    NETWORK_CLOSE,
    NETWORK_CONNECT
};
class NetWorkStateProcessor
{
protected:
    NetWorkStateProcessor* m_NextStateProcessor;
public:
    virtual void Option1()=0;
    virtual void Option2()=0;
};

class OpenState :public NetWorkStateProcessor
{
    static NetWorkStateProcessor* m_Instance;
public:
    static NetWorkStateProcessor* GetInstance();

    virtual void Option1() override
    {
        //do something only revelant current state
        m_NextStateProcessor = ConnectState::GetInstance();
    }

    virtual void Option2() override
    {
        //do something only revelant current state
        m_NextStateProcessor = CloseState::GetInstance();
    }
};

class CloseState :public NetWorkStateProcessor
{
public:
    static NetWorkStateProcessor* GetInstance();

    virtual void Option1() override
    {
        //...
    }
    virtual void Option2() override
    {
        //...
    }
};
class ConnectState :public NetWorkStateProcessor
{
public:
    static NetWorkStateProcessor* GetInstance();

    virtual void Option1() override
    {
        //...
    }
    virtual void Option2() override
    {
        //...
    }
};</span></div></body>
</html>
